#include <stdio.h>
#include <string.h>

#include "util.h"
#include "test.h"

static const uint64_t n[] = {
    0,
    1024,
    1048576,
    1073741824,
    1099511627776,
    1125899906842624,
    1152921504606846976,

    // random integers
    513524396,
    9345333333333305,
    857361879,
    598228394,
    28643413,
    869382,
    493851206,
    1712,
    33522447705,
    2157719,
    245592222222222742,
    80174019,
    777851,
    830733314299,
    165918401,
    2695816,
    428830177,
    973079073,
    5274033345,
    841378620,
    7143039,
    73,
    853,
    80389,
    42229004,
    7947977,
    901873,
    244,
    528543314,
    5517216,
    16304,
    53169001,
};

static const char a[][6] = {
    "0000B",
    "1024B",
    "1024K",
    "1024M",
    "1024G",
    "1024T",
    "1024P",

    // random integers
    "0489M",
    "0008P",
    "0817M",
    "0570M",
    "27.9M",
    "0849K",
    "0470M",
    "0001K",
    "0031G",
    "02.1M",
    "0218P",
    "78.2M",
    "0759K",
    "0773G",
    "0158M",
    "02.6M",
    "0408M",
    "0928M",
    "0004G",
    "0802M",
    "06.9M",
    "0073B",
    "0853B",
    "0078K",
    "41.2M",
    "07.7M",
    "0880K",
    "0244B",
    "0504M",
    "05.3M",
    "0015K",
    "51.9M",
};

int main(int argc, char *argv[]) {
    (void) argc;
    (void) argv;

    test_begin(__FILE__);

    char res[6];

    for (size_t i = 0; i < sizeof(a) / sizeof(a[0]); i++) {
        test(strcmp(human_readable(n[i], res), a[i]) == 0);
    }

    return test_finish();
}

